<!DOCTYPE HTML>
<html lang="es">
	<head>
		<meta charset="utf-8" />
		<title>{% block title %}eCommerce{% endblock %}</title>
		{% block stylesheets %}
        <link href="{{ asset('assets/styles/app.css') }}" type="text/css" rel="stylesheet" />
		<!-- Bootstrap 5 -->
		<!-- CSS only -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
		{# <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> #}
		{% endblock %}
    </head>
	<body>
		<div id="container">
			<!-- HEADER -->
            <header id="header">
                <div id="logo">
                    <img src="{{ asset('assets/imgs/global/logo.png') }}" alt="Logo" />
                    <a href="{{ path('index') }}">
                        eCommerce
                    </a>
                </div>
            </header>

			<!-- MENU -->
			<nav id="menu" class="navbar navbar-expand-md">
				<div class="container-fluid">
					<div class="row justify-content-between style="width:100%;"">
						<div class="col-auto">
							{# <a class="navbar-brand" href="#">eCommerce</a> #}
							<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
							<span class="navbar-toggler-icon"></span>
							</button>
							<div class="collapse navbar-collapse" id="navbarNavDropdown">
								<ul class="navbar-nav">
									<li class="nav-item">
										<a class="nav-link active" aria-current="page" href="{{ path('index') }}">
											Home
										</a>
									</li>
									<li class="nav-item dropdown">
										<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
											Products
										</a>
										<ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
											{% for category in getCategories() %}
												<li>
													<a class="dropdown-item" href="{{ path('showCategory', {'id':category.id} )}}">
														{{ category.name }}
													</a>
												</li>
											{% endfor %}
										</ul>
									</li>
									<li class="nav-item dropdown">
										<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
											Brands
										</a>
										<ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
											{% for brand in getBrands() %}
												<li>
													<a class="dropdown-item" href="{{ path('showBrand', {'id':brand.id} )}}">
														{{ brand.name }}
													</a>
												</li>
											{% endfor %}
										</ul>
									</li>
								</ul>
							</div>
						</div>
						<div class="col-auto">
							<ul class="navbar-nav">
								<li class="nav-item dropdown">
									<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
										Basket
									</a>
									<ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
										{% set stats = statsBasket(app.user) %}
										<li><a href=
										{% if app.user %}
											"{{ path('basket', {'id':app.user.id}) }}"
											{% else %}
											"{{ path('basket')}}"
										{% endif %}
										>Basket ({{ stats.count }})</a></li>
										<li><a href="#">Total: {{ stats.total }} â‚¬</a></li>
									</ul>
									</li>
									<li class="nav-item dropdown">
										<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
											{% if app.user %}
												{# {% if app.user.role == 'ROLE_USER' %} #}
												{{app.user.name ~ ' ' ~ app.user.surname}}
											{% else %}
												Login
											{% endif %}
										</a>
										<ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
											{% if app.user %}
												<li><a href="#">My Orders</a></li>
												<li><a href="#">Manage Orders</a></li>
												<li><a href="{{ path('manageCategories')}}">Manage Categories</a></li>
												<li><a href="{{ path('manageBrands')}}">Manage Brands</a></li>
												<li><a href="{{ path('manageProducts') }}">Manage Products</a></li>

												<li><a href="{{path('register', {'id':app.user.id})}}">My details</a></li>
												<li><a href="{{path('logout')}}">Logout</a></li>
												</ul>
											{% else %}
												<form action="{{ path('login_check') }}" method="post">
													<label for="email">Email</label>
													<input type="email" id="username" name="_username" />

													<label for="password">Password</label>
													<input type="password" id="password" name="_password" />

													<input type="submit" value="Submit" />
												</form>
												<li><a href="{{ path('register') }}">Register</a></li>
											{% endif %}
										</ul>
									</li>
								</ul>
						</div>
					</div>
				</div>
			</nav>

			<div id="content">

				<!-- SIDE BAR -->
				{# <aside id="lateral">
						{{ include('includes/side-bar.html.twig') }}
				</aside> #}

				<!-- CENTRAL CONTENT -->
                
				<div id="central">
					<h1>{% block header %}{% endblock %}</h1>
                    {% block main %}{% endblock %}
				</div>
                
			</div>

			<!-- FOOTER -->
			<footer id="footer">
				<p>Developed by Juan Repeto &copy; <?= date('Y') ?></p>
			</footer>
		</div>
		<!-- JavaScript Bundle with Popper -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
	</body>
</html>

